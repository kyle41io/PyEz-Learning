# ğŸš€ PyEz-Learning Deployment Guide

## âš ï¸ Important: SQLite Database Notice

Your app currently uses SQLite (`db.sqlite3`). **This will cause issues on most cloud platforms** because:
- SQLite file is **ephemeral** (resets on every deployment)
- All data (users, lessons, exams, progress) will be **lost** when the app restarts
- Not suitable for production use

**Recommended:** Upgrade to PostgreSQL (free on Railway/Render). See instructions below.

---

## ğŸ“‹ Files Created for Deployment

âœ… **requirements.txt** - Python dependencies  
âœ… **Procfile** - Deployment commands  
âœ… **runtime.txt** - Python version specification  
âœ… **.env.example** - Environment variables template  
âœ… **settings.py** - Updated for production (WhiteNoise, env variables)

---

## ğŸ¯ Recommended Platform: Railway.app

### Why Railway?
- âœ… $5 free credit/month (enough for small projects)
- âœ… Free PostgreSQL database
- âœ… Auto-deploy from GitHub
- âœ… Easy setup for Django
- âœ… No credit card required initially

### Step-by-Step Deployment:

#### 1. Prepare Your Repository

```bash
# Make sure all files are committed
git add .
git commit -m "Add deployment configuration"
git push origin main
```

#### 2. Sign Up & Deploy on Railway

1. Go to [railway.app](https://railway.app)
2. Click "Start a New Project"
3. Select "Deploy from GitHub repo"
4. Choose your `PyEz-Learning` repository
5. Railway will auto-detect Django and deploy!

#### 3. Add PostgreSQL Database (Recommended)

In your Railway project:
1. Click "+ New" â†’ "Database" â†’ "PostgreSQL"
2. Railway automatically creates a database
3. Copy the `DATABASE_URL` from PostgreSQL service variables

#### 4. Set Environment Variables

In Railway project â†’ Variables tab, add:

```
SECRET_KEY=your-new-secret-key-generate-one
DEBUG=False
ALLOWED_HOSTS=.railway.app
DATABASE_URL=(auto-generated by Railway PostgreSQL)
```

**Generate a new SECRET_KEY:**
```bash
python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
```

#### 5. Update settings.py for PostgreSQL (if using)

Add this to your `settings.py`:

```python
# At the top with imports
import dj_database_url

# Replace DATABASES section
DATABASES = {
    'default': dj_database_url.config(
        default=os.getenv('DATABASE_URL', f'sqlite:///{BASE_DIR / "db.sqlite3"}'),
        conn_max_age=600
    )
}
```

Then add to `requirements.txt`:
```
dj-database-url==2.2.0
psycopg2-binary==2.9.10
```

#### 6. Deploy!

Push changes:
```bash
git add .
git commit -m "Add PostgreSQL support"
git push origin main
```

Railway will auto-deploy. Check logs in Railway dashboard.

#### 7. Run Migrations & Create Superuser

In Railway dashboard â†’ Project â†’ Open Terminal:

```bash
python manage.py migrate
python manage.py createsuperuser
```

---

## ğŸ¨ Alternative: Render.com

Similar process:
1. Sign up at [render.com](https://render.com)
2. New â†’ Web Service â†’ Connect GitHub repo
3. Add PostgreSQL database (free for 90 days)
4. Set environment variables
5. Deploy

**Note:** Render free tier spins down after 15 min inactivity (slow restarts).

---

## ğŸ“ Pre-Deployment Checklist

- [ ] Committed all code to GitHub
- [ ] Added environment variables
- [ ] Generated new SECRET_KEY for production
- [ ] Set DEBUG=False
- [ ] Set ALLOWED_HOSTS correctly
- [ ] (Recommended) Upgraded from SQLite to PostgreSQL
- [ ] Tested locally with production settings
- [ ] Created admin user after deployment

---

## ğŸ”’ Security Notes

1. **Never commit `.env` file** (already in .gitignore âœ…)
2. **Always use new SECRET_KEY in production**
3. **Set DEBUG=False in production**
4. **Use PostgreSQL, not SQLite for production**
5. **Regularly backup your database**

---

## ğŸ› Troubleshooting

### "Bad Request (400)"
- Add your Railway domain to `ALLOWED_HOSTS`
- Format: `.railway.app` or specific domain

### "Static files not loading"
- Run `python manage.py collectstatic` (Procfile does this automatically)
- Check WhiteNoise is in MIDDLEWARE

### "Database errors"
- Make sure migrations ran: `python manage.py migrate`
- Check DATABASE_URL is set correctly

### "Media files not showing"
For Railway, media files are ephemeral. Use:
- AWS S3
- Cloudinary
- Railway volumes (paid)

---

## ğŸ“š Additional Resources

- [Railway Django Docs](https://docs.railway.app/guides/django)
- [Django Deployment Checklist](https://docs.djangoproject.com/en/5.2/howto/deployment/checklist/)
- [WhiteNoise Documentation](https://whitenoise.readthedocs.io/)

---

## ğŸ‰ Your App is Live!

Once deployed, your app will be available at:
- Railway: `https://your-app-name.railway.app`
- Render: `https://your-app-name.onrender.com`

**Next Steps:**
1. Create admin user
2. Add lessons/content via admin panel
3. Test all features
4. Share with students!

---

Need help? Check Railway/Render logs for error messages.
